<?xml version="1.0" encoding="UTF-8"?>
<output>
	<display>
		<line>
			<text align="left" length="10">Total.</text>
			<text align="right" length="10">${ticket.printTotal()}</text>
		</line>
		<line>
			<text align="center" length="20">Gracias por su compra.</text>
		</line>
	</display>
	<fiscalreceipt>
		<!-- Determinando tipo de Comprobante Fiscal a emitir -->
		#set ($custFiscalChar = "")
		#foreach ($taxinfo in $taxes)  
			#set ($taxline = $ticket.getTaxLine($taxinfo))
			#if ($taxline.getSubTotal() != 0)
				#set ($custFiscalChar = $taxline.getTaxInfo().getLastCharName())
			#end
		#end
		#set ($discriminarIVA = false)
		#if ($custFiscalChar == "I")
			#set ($letraComprobante = "A")
			#set ($discriminarIVA = true)
		#else
			#set ($letraComprobante = "B")
		#end
		
		#set ($tipoDoc = "CUIT")
		#if ($custFiscalChar == "F")
			#set ($tipoDoc = " ")
		#end
		<line>@ABRIRCAJON1</line>
		#if (${ticket.ticketType} == 0)
   		<!-- Cliente -->
   			#set ($customer = $ticket.getCustomer())
			#if ($customer)
			<!-- Tiquet Factura -->
				#set ($l_typeTicket = "TF")
				<line>@FACTABRE|T|C|${letraComprobante}|1|F|17|I|${custFiscalChar}|${customer.printName()}| |${tipoDoc}|$!{customer.printTaxid()}|N|$!{customer.getAddress()}|$!{customer.getAddress2()}| | | |C</line>
			#else
			<!-- Tiquet -->
				#set ($l_typeTicket = "TQ")
				<line>@TIQUEABRE</line>
			#end
			<!-- 
			#if ($place != "")
				<line>@LINEACOLA|1|Mesa: ${place}</line>
			#else
				<line>@LINEACOLA|1|Expendio</line>
			#end
			-->
		#end
		<!-- <line>@LINEACOLA|2|Caja: ${ticket.printUser()}</line> -->
		<!-- Reembolso -->
		#if (${ticket.ticketType} == 1)
		#end
		#foreach ($ticketline in $ticket.getLines())
			#set ($productName = $ticketline.printName())
			#if ($productName == "")
				#set ($productName = "Articulo sin codigo")
			#end
			#if ($discriminarIVA)
				#set ($precioUnitario = ${ticketline.getPrice()})
			#else
				#set ($precioUnitario = ${ticketline.getPriceTax()})
			#end
			#if ($l_typeTicket == "TQ")
				<line>@TIQUEITEM|${productName}|${ticketline.getMultiply()}|${precioUnitario}|21|M|1|0|0</line>
			#elseif($l_typeTicket == "TF")
				<line>@FACTITEM|${productName}|${ticketline.getMultiply()}|${precioUnitario}|21|M|1|0|0</line> 
			#end
			#if ($ticketline.isProductCom()) 
			#else
			#end
		#end
		#foreach ($paymentline in $ticket.payments)      
			#if ($paymentline.name == "cash")
				#if ($l_typeTicket == "TQ")
					<line>@TIQUEPAGO|Efectivo|${paymentline.getPaid()}|T</line>
				#elseif($l_typeTicket == "TF")
					<line>@FACTPAGO|Efectivo|${paymentline.getPaid()}|T</line>
				#end
			#end
		#end
		#if (${ticket.ticketType} == 0)
			#if ($l_typeTicket == "TQ")
				<line>@TIQUECIERRA</line>
			#elseif($l_typeTicket == "TF")
				<line>@FACTCIERRA|T|B| </line>
			#end
		#end
	</fiscalreceipt>
</output>
